!function(n){"use strict";var t={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.exports={},define((function(){return t.exports}))):t.exports="undefined"!=typeof window?window:n:t.exports=exports,function(n){if(!t)var t=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var u={setMatrixArrayType:function(n){r=n}};void 0!==n&&(n.glMatrix=u);var a=Math.PI/180;u.toRadian=function(n){return n*a};var i,o={};o.create=function(){var n=new r(2);return n[0]=0,n[1]=0,n},o.clone=function(n){var t=new r(2);return t[0]=n[0],t[1]=n[1],t},o.fromValues=function(n,t){var e=new r(2);return e[0]=n,e[1]=t,e},o.copy=function(n,t){return n[0]=t[0],n[1]=t[1],n},o.set=function(n,t,r){return n[0]=t,n[1]=r,n},o.add=function(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n},o.subtract=function(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n},o.sub=o.subtract,o.multiply=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n},o.mul=o.multiply,o.divide=function(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n},o.div=o.divide,o.min=function(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n},o.max=function(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n},o.scale=function(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n},o.scaleAndAdd=function(n,t,r,e){return n[0]=t[0]+r[0]*e,n[1]=t[1]+r[1]*e,n},o.distance=function(n,t){var r=t[0]-n[0],e=t[1]-n[1];return Math.sqrt(r*r+e*e)},o.dist=o.distance,o.squaredDistance=function(n,t){var r=t[0]-n[0],e=t[1]-n[1];return r*r+e*e},o.sqrDist=o.squaredDistance,o.length=function(n){var t=n[0],r=n[1];return Math.sqrt(t*t+r*r)},o.len=o.length,o.squaredLength=function(n){var t=n[0],r=n[1];return t*t+r*r},o.sqrLen=o.squaredLength,o.negate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n},o.normalize=function(n,t){var r=t[0],e=t[1],u=r*r+e*e;return u>0&&(u=1/Math.sqrt(u),n[0]=t[0]*u,n[1]=t[1]*u),n},o.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]},o.cross=function(n,t,r){var e=t[0]*r[1]-t[1]*r[0];return n[0]=n[1]=0,n[2]=e,n},o.lerp=function(n,t,r,e){var u=t[0],a=t[1];return n[0]=u+e*(r[0]-u),n[1]=a+e*(r[1]-a),n},o.random=function(n,t){t=t||1;var r=2*e()*Math.PI;return n[0]=Math.cos(r)*t,n[1]=Math.sin(r)*t,n},o.transformMat2=function(n,t,r){var e=t[0],u=t[1];return n[0]=r[0]*e+r[2]*u,n[1]=r[1]*e+r[3]*u,n},o.transformMat2d=function(n,t,r){var e=t[0],u=t[1];return n[0]=r[0]*e+r[2]*u+r[4],n[1]=r[1]*e+r[3]*u+r[5],n},o.transformMat3=function(n,t,r){var e=t[0],u=t[1];return n[0]=r[0]*e+r[3]*u+r[6],n[1]=r[1]*e+r[4]*u+r[7],n},o.transformMat4=function(n,t,r){var e=t[0],u=t[1];return n[0]=r[0]*e+r[4]*u+r[12],n[1]=r[1]*e+r[5]*u+r[13],n},o.forEach=(i=o.create(),function(n,t,r,e,u,a){var o,c;for(t||(t=2),r||(r=0),c=e?Math.min(e*t+r,n.length):n.length,o=r;o<c;o+=t)i[0]=n[o],i[1]=n[o+1],u(i,i,a),n[o]=i[0],n[o+1]=i[1];return n}),o.str=function(n){return"vec2("+n[0]+", "+n[1]+")"},void 0!==n&&(n.vec2=o);var c={create:function(){var n=new r(3);return n[0]=0,n[1]=0,n[2]=0,n},clone:function(n){var t=new r(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},fromValues:function(n,t,e){var u=new r(3);return u[0]=n,u[1]=t,u[2]=e,u},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},set:function(n,t,r,e){return n[0]=t,n[1]=r,n[2]=e,n},add:function(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n},subtract:function(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n}};c.sub=c.subtract,c.multiply=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n},c.mul=c.multiply,c.divide=function(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n},c.div=c.divide,c.min=function(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n},c.max=function(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n},c.scale=function(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n},c.scaleAndAdd=function(n,t,r,e){return n[0]=t[0]+r[0]*e,n[1]=t[1]+r[1]*e,n[2]=t[2]+r[2]*e,n},c.distance=function(n,t){var r=t[0]-n[0],e=t[1]-n[1],u=t[2]-n[2];return Math.sqrt(r*r+e*e+u*u)},c.dist=c.distance,c.squaredDistance=function(n,t){var r=t[0]-n[0],e=t[1]-n[1],u=t[2]-n[2];return r*r+e*e+u*u},c.sqrDist=c.squaredDistance,c.length=function(n){var t=n[0],r=n[1],e=n[2];return Math.sqrt(t*t+r*r+e*e)},c.len=c.length,c.squaredLength=function(n){var t=n[0],r=n[1],e=n[2];return t*t+r*r+e*e},c.sqrLen=c.squaredLength,c.negate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n},c.normalize=function(n,t){var r=t[0],e=t[1],u=t[2],a=r*r+e*e+u*u;return a>0&&(a=1/Math.sqrt(a),n[0]=t[0]*a,n[1]=t[1]*a,n[2]=t[2]*a),n},c.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]},c.cross=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=r[0],o=r[1],c=r[2];return n[0]=u*c-a*o,n[1]=a*i-e*c,n[2]=e*o-u*i,n},c.lerp=function(n,t,r,e){var u=t[0],a=t[1],i=t[2];return n[0]=u+e*(r[0]-u),n[1]=a+e*(r[1]-a),n[2]=i+e*(r[2]-i),n},c.random=function(n,t){t=t||1;var r=2*e()*Math.PI,u=2*e()-1,a=Math.sqrt(1-u*u)*t;return n[0]=Math.cos(r)*a,n[1]=Math.sin(r)*a,n[2]=u*t,n},c.transformMat4=function(n,t,r){var e=t[0],u=t[1],a=t[2];return n[0]=r[0]*e+r[4]*u+r[8]*a+r[12],n[1]=r[1]*e+r[5]*u+r[9]*a+r[13],n[2]=r[2]*e+r[6]*u+r[10]*a+r[14],n},c.transformMat3=function(n,t,r){var e=t[0],u=t[1],a=t[2];return n[0]=e*r[0]+u*r[3]+a*r[6],n[1]=e*r[1]+u*r[4]+a*r[7],n[2]=e*r[2]+u*r[5]+a*r[8],n},c.transformQuat=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=r[0],o=r[1],c=r[2],f=r[3],s=f*e+o*a-c*u,v=f*u+c*e-i*a,l=f*a+i*u-o*e,d=-i*e-o*u-c*a;return n[0]=s*f+d*-i+v*-c-l*-o,n[1]=v*f+d*-o+l*-i-s*-c,n[2]=l*f+d*-c+s*-o-v*-i,n},c.forEach=function(){var n=c.create();return function(t,r,e,u,a,i){var o,c;for(r||(r=3),e||(e=0),c=u?Math.min(u*r+e,t.length):t.length,o=e;o<c;o+=r)n[0]=t[o],n[1]=t[o+1],n[2]=t[o+2],a(n,n,i),t[o]=n[0],t[o+1]=n[1],t[o+2]=n[2];return t}}(),c.str=function(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"},void 0!==n&&(n.vec3=c);var f={create:function(){var n=new r(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n},clone:function(n){var t=new r(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},fromValues:function(n,t,e,u){var a=new r(4);return a[0]=n,a[1]=t,a[2]=e,a[3]=u,a},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},set:function(n,t,r,e,u){return n[0]=t,n[1]=r,n[2]=e,n[3]=u,n},add:function(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n},subtract:function(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n}};f.sub=f.subtract,f.multiply=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n},f.mul=f.multiply,f.divide=function(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n[3]=t[3]/r[3],n},f.div=f.divide,f.min=function(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n[3]=Math.min(t[3],r[3]),n},f.max=function(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n[3]=Math.max(t[3],r[3]),n},f.scale=function(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n},f.scaleAndAdd=function(n,t,r,e){return n[0]=t[0]+r[0]*e,n[1]=t[1]+r[1]*e,n[2]=t[2]+r[2]*e,n[3]=t[3]+r[3]*e,n},f.distance=function(n,t){var r=t[0]-n[0],e=t[1]-n[1],u=t[2]-n[2],a=t[3]-n[3];return Math.sqrt(r*r+e*e+u*u+a*a)},f.dist=f.distance,f.squaredDistance=function(n,t){var r=t[0]-n[0],e=t[1]-n[1],u=t[2]-n[2],a=t[3]-n[3];return r*r+e*e+u*u+a*a},f.sqrDist=f.squaredDistance,f.length=function(n){var t=n[0],r=n[1],e=n[2],u=n[3];return Math.sqrt(t*t+r*r+e*e+u*u)},f.len=f.length,f.squaredLength=function(n){var t=n[0],r=n[1],e=n[2],u=n[3];return t*t+r*r+e*e+u*u},f.sqrLen=f.squaredLength,f.negate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n},f.normalize=function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=r*r+e*e+u*u+a*a;return i>0&&(i=1/Math.sqrt(i),n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i),n},f.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},f.lerp=function(n,t,r,e){var u=t[0],a=t[1],i=t[2],o=t[3];return n[0]=u+e*(r[0]-u),n[1]=a+e*(r[1]-a),n[2]=i+e*(r[2]-i),n[3]=o+e*(r[3]-o),n},f.random=function(n,t){return t=t||1,n[0]=e(),n[1]=e(),n[2]=e(),n[3]=e(),f.normalize(n,n),f.scale(n,n,t),n},f.transformMat4=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3];return n[0]=r[0]*e+r[4]*u+r[8]*a+r[12]*i,n[1]=r[1]*e+r[5]*u+r[9]*a+r[13]*i,n[2]=r[2]*e+r[6]*u+r[10]*a+r[14]*i,n[3]=r[3]*e+r[7]*u+r[11]*a+r[15]*i,n},f.transformQuat=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=r[0],o=r[1],c=r[2],f=r[3],s=f*e+o*a-c*u,v=f*u+c*e-i*a,l=f*a+i*u-o*e,d=-i*e-o*u-c*a;return n[0]=s*f+d*-i+v*-c-l*-o,n[1]=v*f+d*-o+l*-i-s*-c,n[2]=l*f+d*-c+s*-o-v*-i,n},f.forEach=function(){var n=f.create();return function(t,r,e,u,a,i){var o,c;for(r||(r=4),e||(e=0),c=u?Math.min(u*r+e,t.length):t.length,o=e;o<c;o+=r)n[0]=t[o],n[1]=t[o+1],n[2]=t[o+2],n[3]=t[o+3],a(n,n,i),t[o]=n[0],t[o+1]=n[1],t[o+2]=n[2],t[o+3]=n[3];return t}}(),f.str=function(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},void 0!==n&&(n.vec4=f);var s={create:function(){var n=new r(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},clone:function(n){var t=new r(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},transpose:function(n,t){if(n===t){var r=t[1];n[1]=t[2],n[2]=r}else n[0]=t[0],n[1]=t[2],n[2]=t[1],n[3]=t[3];return n},invert:function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=r*a-u*e;return i?(i=1/i,n[0]=a*i,n[1]=-e*i,n[2]=-u*i,n[3]=r*i,n):null},adjoint:function(n,t){var r=t[0];return n[0]=t[3],n[1]=-t[1],n[2]=-t[2],n[3]=r,n},determinant:function(n){return n[0]*n[3]-n[2]*n[1]},multiply:function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=r[0],c=r[1],f=r[2],s=r[3];return n[0]=e*o+u*f,n[1]=e*c+u*s,n[2]=a*o+i*f,n[3]=a*c+i*s,n}};s.mul=s.multiply,s.rotate=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=Math.sin(r),c=Math.cos(r);return n[0]=e*c+u*o,n[1]=e*-o+u*c,n[2]=a*c+i*o,n[3]=a*-o+i*c,n},s.scale=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=r[0],c=r[1];return n[0]=e*o,n[1]=u*c,n[2]=a*o,n[3]=i*c,n},s.str=function(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},void 0!==n&&(n.mat2=s);var v={create:function(){var n=new r(6);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},clone:function(n){var t=new r(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},invert:function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=t[4],o=t[5],c=r*a-e*u;return c?(c=1/c,n[0]=a*c,n[1]=-e*c,n[2]=-u*c,n[3]=r*c,n[4]=(u*o-a*i)*c,n[5]=(e*i-r*o)*c,n):null},determinant:function(n){return n[0]*n[3]-n[1]*n[2]},multiply:function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=r[0],s=r[1],v=r[2],l=r[3],d=r[4],h=r[5];return n[0]=e*f+u*v,n[1]=e*s+u*l,n[2]=a*f+i*v,n[3]=a*s+i*l,n[4]=f*o+v*c+d,n[5]=s*o+l*c+h,n}};v.mul=v.multiply,v.rotate=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=Math.sin(r),s=Math.cos(r);return n[0]=e*s+u*f,n[1]=-e*f+u*s,n[2]=a*s+i*f,n[3]=-a*f+s*i,n[4]=s*o+f*c,n[5]=s*c-f*o,n},v.scale=function(n,t,r){var e=r[0],u=r[1];return n[0]=t[0]*e,n[1]=t[1]*u,n[2]=t[2]*e,n[3]=t[3]*u,n[4]=t[4]*e,n[5]=t[5]*u,n},v.translate=function(n,t,r){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+r[0],n[5]=t[5]+r[1],n},v.str=function(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"},void 0!==n&&(n.mat2d=v);var l={create:function(){var n=new r(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},fromMat4:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n},clone:function(n){var t=new r(9);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},transpose:function(n,t){if(n===t){var r=t[1],e=t[2],u=t[5];n[1]=t[3],n[2]=t[6],n[3]=r,n[5]=t[7],n[6]=e,n[7]=u}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n},invert:function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8],v=s*i-o*f,l=-s*a+o*c,d=f*a-i*c,h=r*v+e*l+u*d;return h?(h=1/h,n[0]=v*h,n[1]=(-s*e+u*f)*h,n[2]=(o*e-u*i)*h,n[3]=l*h,n[4]=(s*r-u*c)*h,n[5]=(-o*r+u*a)*h,n[6]=d*h,n[7]=(-f*r+e*c)*h,n[8]=(i*r-e*a)*h,n):null},adjoint:function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8];return n[0]=i*s-o*f,n[1]=u*f-e*s,n[2]=e*o-u*i,n[3]=o*c-a*s,n[4]=r*s-u*c,n[5]=u*a-r*o,n[6]=a*f-i*c,n[7]=e*c-r*f,n[8]=r*i-e*a,n},determinant:function(n){var t=n[0],r=n[1],e=n[2],u=n[3],a=n[4],i=n[5],o=n[6],c=n[7],f=n[8];return t*(f*a-i*c)+r*(-f*u+i*o)+e*(c*u-a*o)},multiply:function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],v=t[8],l=r[0],d=r[1],h=r[2],m=r[3],M=r[4],p=r[5],q=r[6],y=r[7],g=r[8];return n[0]=l*e+d*i+h*f,n[1]=l*u+d*o+h*s,n[2]=l*a+d*c+h*v,n[3]=m*e+M*i+p*f,n[4]=m*u+M*o+p*s,n[5]=m*a+M*c+p*v,n[6]=q*e+y*i+g*f,n[7]=q*u+y*o+g*s,n[8]=q*a+y*c+g*v,n}};l.mul=l.multiply,l.translate=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],v=t[8],l=r[0],d=r[1];return n[0]=e,n[1]=u,n[2]=a,n[3]=i,n[4]=o,n[5]=c,n[6]=l*e+d*i+f,n[7]=l*u+d*o+s,n[8]=l*a+d*c+v,n},l.rotate=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],v=t[8],l=Math.sin(r),d=Math.cos(r);return n[0]=d*e+l*i,n[1]=d*u+l*o,n[2]=d*a+l*c,n[3]=d*i-l*e,n[4]=d*o-l*u,n[5]=d*c-l*a,n[6]=f,n[7]=s,n[8]=v,n},l.scale=function(n,t,r){var e=r[0],u=r[1];return n[0]=e*t[0],n[1]=e*t[1],n[2]=e*t[2],n[3]=u*t[3],n[4]=u*t[4],n[5]=u*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},l.fromMat2d=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=0,n[3]=t[2],n[4]=t[3],n[5]=0,n[6]=t[4],n[7]=t[5],n[8]=1,n},l.fromQuat=function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=r+r,o=e+e,c=u+u,f=r*i,s=e*i,v=e*o,l=u*i,d=u*o,h=u*c,m=a*i,M=a*o,p=a*c;return n[0]=1-v-h,n[3]=s-p,n[6]=l+M,n[1]=s+p,n[4]=1-f-h,n[7]=d-m,n[2]=l-M,n[5]=d+m,n[8]=1-f-v,n},l.normalFromMat4=function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8],v=t[9],l=t[10],d=t[11],h=t[12],m=t[13],M=t[14],p=t[15],q=r*o-e*i,y=r*c-u*i,g=r*f-a*i,x=e*c-u*o,w=e*f-a*o,A=u*f-a*c,b=s*m-v*h,L=s*M-l*h,z=s*p-d*h,D=v*M-l*m,V=v*p-d*m,j=l*p-d*M,I=q*j-y*V+g*D+x*z-w*L+A*b;return I?(I=1/I,n[0]=(o*j-c*V+f*D)*I,n[1]=(c*z-i*j-f*L)*I,n[2]=(i*V-o*z+f*b)*I,n[3]=(u*V-e*j-a*D)*I,n[4]=(r*j-u*z+a*L)*I,n[5]=(e*z-r*V-a*b)*I,n[6]=(m*A-M*w+p*x)*I,n[7]=(M*g-h*A-p*y)*I,n[8]=(h*w-m*g+p*q)*I,n):null},l.str=function(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"},void 0!==n&&(n.mat3=l);var d={create:function(){var n=new r(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},clone:function(n){var t=new r(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},transpose:function(n,t){if(n===t){var r=t[1],e=t[2],u=t[3],a=t[6],i=t[7],o=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=r,n[6]=t[9],n[7]=t[13],n[8]=e,n[9]=a,n[11]=t[14],n[12]=u,n[13]=i,n[14]=o}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n},invert:function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8],v=t[9],l=t[10],d=t[11],h=t[12],m=t[13],M=t[14],p=t[15],q=r*o-e*i,y=r*c-u*i,g=r*f-a*i,x=e*c-u*o,w=e*f-a*o,A=u*f-a*c,b=s*m-v*h,L=s*M-l*h,z=s*p-d*h,D=v*M-l*m,V=v*p-d*m,j=l*p-d*M,I=q*j-y*V+g*D+x*z-w*L+A*b;return I?(I=1/I,n[0]=(o*j-c*V+f*D)*I,n[1]=(u*V-e*j-a*D)*I,n[2]=(m*A-M*w+p*x)*I,n[3]=(l*w-v*A-d*x)*I,n[4]=(c*z-i*j-f*L)*I,n[5]=(r*j-u*z+a*L)*I,n[6]=(M*g-h*A-p*y)*I,n[7]=(s*A-l*g+d*y)*I,n[8]=(i*V-o*z+f*b)*I,n[9]=(e*z-r*V-a*b)*I,n[10]=(h*w-m*g+p*q)*I,n[11]=(v*g-s*w-d*q)*I,n[12]=(o*L-i*D-c*b)*I,n[13]=(r*D-e*L+u*b)*I,n[14]=(m*y-h*x-M*q)*I,n[15]=(s*x-v*y+l*q)*I,n):null},adjoint:function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8],v=t[9],l=t[10],d=t[11],h=t[12],m=t[13],M=t[14],p=t[15];return n[0]=o*(l*p-d*M)-v*(c*p-f*M)+m*(c*d-f*l),n[1]=-(e*(l*p-d*M)-v*(u*p-a*M)+m*(u*d-a*l)),n[2]=e*(c*p-f*M)-o*(u*p-a*M)+m*(u*f-a*c),n[3]=-(e*(c*d-f*l)-o*(u*d-a*l)+v*(u*f-a*c)),n[4]=-(i*(l*p-d*M)-s*(c*p-f*M)+h*(c*d-f*l)),n[5]=r*(l*p-d*M)-s*(u*p-a*M)+h*(u*d-a*l),n[6]=-(r*(c*p-f*M)-i*(u*p-a*M)+h*(u*f-a*c)),n[7]=r*(c*d-f*l)-i*(u*d-a*l)+s*(u*f-a*c),n[8]=i*(v*p-d*m)-s*(o*p-f*m)+h*(o*d-f*v),n[9]=-(r*(v*p-d*m)-s*(e*p-a*m)+h*(e*d-a*v)),n[10]=r*(o*p-f*m)-i*(e*p-a*m)+h*(e*f-a*o),n[11]=-(r*(o*d-f*v)-i*(e*d-a*v)+s*(e*f-a*o)),n[12]=-(i*(v*M-l*m)-s*(o*M-c*m)+h*(o*l-c*v)),n[13]=r*(v*M-l*m)-s*(e*M-u*m)+h*(e*l-u*v),n[14]=-(r*(o*M-c*m)-i*(e*M-u*m)+h*(e*c-u*o)),n[15]=r*(o*l-c*v)-i*(e*l-u*v)+s*(e*c-u*o),n},determinant:function(n){var t=n[0],r=n[1],e=n[2],u=n[3],a=n[4],i=n[5],o=n[6],c=n[7],f=n[8],s=n[9],v=n[10],l=n[11],d=n[12],h=n[13],m=n[14],M=n[15];return(t*i-r*a)*(v*M-l*m)-(t*o-e*a)*(s*M-l*h)+(t*c-u*a)*(s*m-v*h)+(r*o-e*i)*(f*M-l*d)-(r*c-u*i)*(f*m-v*d)+(e*c-u*o)*(f*h-s*d)},multiply:function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],v=t[8],l=t[9],d=t[10],h=t[11],m=t[12],M=t[13],p=t[14],q=t[15],y=r[0],g=r[1],x=r[2],w=r[3];return n[0]=y*e+g*o+x*v+w*m,n[1]=y*u+g*c+x*l+w*M,n[2]=y*a+g*f+x*d+w*p,n[3]=y*i+g*s+x*h+w*q,y=r[4],g=r[5],x=r[6],w=r[7],n[4]=y*e+g*o+x*v+w*m,n[5]=y*u+g*c+x*l+w*M,n[6]=y*a+g*f+x*d+w*p,n[7]=y*i+g*s+x*h+w*q,y=r[8],g=r[9],x=r[10],w=r[11],n[8]=y*e+g*o+x*v+w*m,n[9]=y*u+g*c+x*l+w*M,n[10]=y*a+g*f+x*d+w*p,n[11]=y*i+g*s+x*h+w*q,y=r[12],g=r[13],x=r[14],w=r[15],n[12]=y*e+g*o+x*v+w*m,n[13]=y*u+g*c+x*l+w*M,n[14]=y*a+g*f+x*d+w*p,n[15]=y*i+g*s+x*h+w*q,n}};d.mul=d.multiply,d.translate=function(n,t,r){var e,u,a,i,o,c,f,s,v,l,d,h,m=r[0],M=r[1],p=r[2];return t===n?(n[12]=t[0]*m+t[4]*M+t[8]*p+t[12],n[13]=t[1]*m+t[5]*M+t[9]*p+t[13],n[14]=t[2]*m+t[6]*M+t[10]*p+t[14],n[15]=t[3]*m+t[7]*M+t[11]*p+t[15]):(e=t[0],u=t[1],a=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],v=t[8],l=t[9],d=t[10],h=t[11],n[0]=e,n[1]=u,n[2]=a,n[3]=i,n[4]=o,n[5]=c,n[6]=f,n[7]=s,n[8]=v,n[9]=l,n[10]=d,n[11]=h,n[12]=e*m+o*M+v*p+t[12],n[13]=u*m+c*M+l*p+t[13],n[14]=a*m+f*M+d*p+t[14],n[15]=i*m+s*M+h*p+t[15]),n},d.scale=function(n,t,r){var e=r[0],u=r[1],a=r[2];return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*u,n[5]=t[5]*u,n[6]=t[6]*u,n[7]=t[7]*u,n[8]=t[8]*a,n[9]=t[9]*a,n[10]=t[10]*a,n[11]=t[11]*a,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},d.rotate=function(n,r,e,u){var a,i,o,c,f,s,v,l,d,h,m,M,p,q,y,g,x,w,A,b,L,z,D,V,j=u[0],I=u[1],P=u[2],Q=Math.sqrt(j*j+I*I+P*P);return Math.abs(Q)<t?null:(j*=Q=1/Q,I*=Q,P*=Q,a=Math.sin(e),o=1-(i=Math.cos(e)),c=r[0],f=r[1],s=r[2],v=r[3],l=r[4],d=r[5],h=r[6],m=r[7],M=r[8],p=r[9],q=r[10],y=r[11],g=j*j*o+i,x=I*j*o+P*a,w=P*j*o-I*a,A=j*I*o-P*a,b=I*I*o+i,L=P*I*o+j*a,z=j*P*o+I*a,D=I*P*o-j*a,V=P*P*o+i,n[0]=c*g+l*x+M*w,n[1]=f*g+d*x+p*w,n[2]=s*g+h*x+q*w,n[3]=v*g+m*x+y*w,n[4]=c*A+l*b+M*L,n[5]=f*A+d*b+p*L,n[6]=s*A+h*b+q*L,n[7]=v*A+m*b+y*L,n[8]=c*z+l*D+M*V,n[9]=f*z+d*D+p*V,n[10]=s*z+h*D+q*V,n[11]=v*z+m*D+y*V,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)},d.rotateX=function(n,t,r){var e=Math.sin(r),u=Math.cos(r),a=t[4],i=t[5],o=t[6],c=t[7],f=t[8],s=t[9],v=t[10],l=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=a*u+f*e,n[5]=i*u+s*e,n[6]=o*u+v*e,n[7]=c*u+l*e,n[8]=f*u-a*e,n[9]=s*u-i*e,n[10]=v*u-o*e,n[11]=l*u-c*e,n},d.rotateY=function(n,t,r){var e=Math.sin(r),u=Math.cos(r),a=t[0],i=t[1],o=t[2],c=t[3],f=t[8],s=t[9],v=t[10],l=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=a*u-f*e,n[1]=i*u-s*e,n[2]=o*u-v*e,n[3]=c*u-l*e,n[8]=a*e+f*u,n[9]=i*e+s*u,n[10]=o*e+v*u,n[11]=c*e+l*u,n},d.rotateZ=function(n,t,r){var e=Math.sin(r),u=Math.cos(r),a=t[0],i=t[1],o=t[2],c=t[3],f=t[4],s=t[5],v=t[6],l=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=a*u+f*e,n[1]=i*u+s*e,n[2]=o*u+v*e,n[3]=c*u+l*e,n[4]=f*u-a*e,n[5]=s*u-i*e,n[6]=v*u-o*e,n[7]=l*u-c*e,n},d.fromRotationTranslation=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=e+e,c=u+u,f=a+a,s=e*o,v=e*c,l=e*f,d=u*c,h=u*f,m=a*f,M=i*o,p=i*c,q=i*f;return n[0]=1-(d+m),n[1]=v+q,n[2]=l-p,n[3]=0,n[4]=v-q,n[5]=1-(s+m),n[6]=h+M,n[7]=0,n[8]=l+p,n[9]=h-M,n[10]=1-(s+d),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n},d.fromQuat=function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=r+r,o=e+e,c=u+u,f=r*i,s=e*i,v=e*o,l=u*i,d=u*o,h=u*c,m=a*i,M=a*o,p=a*c;return n[0]=1-v-h,n[1]=s+p,n[2]=l-M,n[3]=0,n[4]=s-p,n[5]=1-f-h,n[6]=d+m,n[7]=0,n[8]=l+M,n[9]=d-m,n[10]=1-f-v,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},d.frustum=function(n,t,r,e,u,a,i){var o=1/(r-t),c=1/(u-e),f=1/(a-i);return n[0]=2*a*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*a*c,n[6]=0,n[7]=0,n[8]=(r+t)*o,n[9]=(u+e)*c,n[10]=(i+a)*f,n[11]=-1,n[12]=0,n[13]=0,n[14]=i*a*2*f,n[15]=0,n},d.perspective=function(n,t,r,e,u){var a=1/Math.tan(t/2),i=1/(e-u);return n[0]=a/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(u+e)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*u*e*i,n[15]=0,n},d.ortho=function(n,t,r,e,u,a,i){var o=1/(t-r),c=1/(e-u),f=1/(a-i);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*f,n[11]=0,n[12]=(t+r)*o,n[13]=(u+e)*c,n[14]=(i+a)*f,n[15]=1,n},d.lookAt=function(n,r,e,u){var a,i,o,c,f,s,v,l,h,m,M=r[0],p=r[1],q=r[2],y=u[0],g=u[1],x=u[2],w=e[0],A=e[1],b=e[2];return Math.abs(M-w)<t&&Math.abs(p-A)<t&&Math.abs(q-b)<t?d.identity(n):(v=M-w,l=p-A,h=q-b,a=g*(h*=m=1/Math.sqrt(v*v+l*l+h*h))-x*(l*=m),i=x*(v*=m)-y*h,o=y*l-g*v,(m=Math.sqrt(a*a+i*i+o*o))?(a*=m=1/m,i*=m,o*=m):(a=0,i=0,o=0),c=l*o-h*i,f=h*a-v*o,s=v*i-l*a,(m=Math.sqrt(c*c+f*f+s*s))?(c*=m=1/m,f*=m,s*=m):(c=0,f=0,s=0),n[0]=a,n[1]=c,n[2]=v,n[3]=0,n[4]=i,n[5]=f,n[6]=l,n[7]=0,n[8]=o,n[9]=s,n[10]=h,n[11]=0,n[12]=-(a*M+i*p+o*q),n[13]=-(c*M+f*p+s*q),n[14]=-(v*M+l*p+h*q),n[15]=1,n)},d.str=function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"},void 0!==n&&(n.mat4=d);var h,m,M,p,q={};q.create=function(){var n=new r(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},q.rotationTo=(h=c.create(),m=c.fromValues(1,0,0),M=c.fromValues(0,1,0),function(n,t,r){var e=c.dot(t,r);return e<-.999999?(c.cross(h,m,t),c.length(h)<1e-6&&c.cross(h,M,t),c.normalize(h,h),q.setAxisAngle(n,h,Math.PI),n):e>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(c.cross(h,t,r),n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=1+e,q.normalize(n,n))}),q.setAxes=(p=l.create(),function(n,t,r,e){return p[0]=r[0],p[3]=r[1],p[6]=r[2],p[1]=e[0],p[4]=e[1],p[7]=e[2],p[2]=-t[0],p[5]=-t[1],p[8]=-t[2],q.normalize(n,q.fromMat3(n,p))}),q.clone=f.clone,q.fromValues=f.fromValues,q.copy=f.copy,q.set=f.set,q.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},q.setAxisAngle=function(n,t,r){r*=.5;var e=Math.sin(r);return n[0]=e*t[0],n[1]=e*t[1],n[2]=e*t[2],n[3]=Math.cos(r),n},q.add=f.add,q.multiply=function(n,t,r){var e=t[0],u=t[1],a=t[2],i=t[3],o=r[0],c=r[1],f=r[2],s=r[3];return n[0]=e*s+i*o+u*f-a*c,n[1]=u*s+i*c+a*o-e*f,n[2]=a*s+i*f+e*c-u*o,n[3]=i*s-e*o-u*c-a*f,n},q.mul=q.multiply,q.scale=f.scale,q.rotateX=function(n,t,r){r*=.5;var e=t[0],u=t[1],a=t[2],i=t[3],o=Math.sin(r),c=Math.cos(r);return n[0]=e*c+i*o,n[1]=u*c+a*o,n[2]=a*c-u*o,n[3]=i*c-e*o,n},q.rotateY=function(n,t,r){r*=.5;var e=t[0],u=t[1],a=t[2],i=t[3],o=Math.sin(r),c=Math.cos(r);return n[0]=e*c-a*o,n[1]=u*c+i*o,n[2]=a*c+e*o,n[3]=i*c-u*o,n},q.rotateZ=function(n,t,r){r*=.5;var e=t[0],u=t[1],a=t[2],i=t[3],o=Math.sin(r),c=Math.cos(r);return n[0]=e*c+u*o,n[1]=u*c-e*o,n[2]=a*c+i*o,n[3]=i*c-a*o,n},q.calculateW=function(n,t){var r=t[0],e=t[1],u=t[2];return n[0]=r,n[1]=e,n[2]=u,n[3]=-Math.sqrt(Math.abs(1-r*r-e*e-u*u)),n},q.dot=f.dot,q.lerp=f.lerp,q.slerp=function(n,t,r,e){var u,a,i,o,c,f=t[0],s=t[1],v=t[2],l=t[3],d=r[0],h=r[1],m=r[2],M=r[3];return(a=f*d+s*h+v*m+l*M)<0&&(a=-a,d=-d,h=-h,m=-m,M=-M),1-a>1e-6?(u=Math.acos(a),i=Math.sin(u),o=Math.sin((1-e)*u)/i,c=Math.sin(e*u)/i):(o=1-e,c=e),n[0]=o*f+c*d,n[1]=o*s+c*h,n[2]=o*v+c*m,n[3]=o*l+c*M,n},q.invert=function(n,t){var r=t[0],e=t[1],u=t[2],a=t[3],i=r*r+e*e+u*u+a*a,o=i?1/i:0;return n[0]=-r*o,n[1]=-e*o,n[2]=-u*o,n[3]=a*o,n},q.conjugate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n},q.length=f.length,q.len=q.length,q.squaredLength=f.squaredLength,q.sqrLen=q.squaredLength,q.normalize=f.normalize,q.fromMat3=function(n,t){var r,e=t[0]+t[4]+t[8];if(e>0)r=Math.sqrt(e+1),n[3]=.5*r,r=.5/r,n[0]=(t[7]-t[5])*r,n[1]=(t[2]-t[6])*r,n[2]=(t[3]-t[1])*r;else{var u=0;t[4]>t[0]&&(u=1),t[8]>t[3*u+u]&&(u=2);var a=(u+1)%3,i=(u+2)%3;r=Math.sqrt(t[3*u+u]-t[3*a+a]-t[3*i+i]+1),n[u]=.5*r,r=.5/r,n[3]=(t[3*i+a]-t[3*a+i])*r,n[a]=(t[3*a+u]+t[3*u+a])*r,n[i]=(t[3*i+u]+t[3*u+i])*r}return n},q.str=function(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},void 0!==n&&(n.quat=q)}(t.exports)}(this);
