function trilaterate(n,r,t,u){function x(n){return n*n}function y(n){return Math.sqrt(x(n.x)+x(n.y)+x(n.z))}function z(n,r){return n.x*r.x+n.y*r.y+n.z*r.z}function e(n,r){return{x:n.x-r.x,y:n.y-r.y,z:n.z-r.z}}function i(n,r){return{x:n.x+r.x,y:n.y+r.y,z:n.z+r.z}}function a(n,r){return{x:n.x/r,y:n.y/r,z:n.z/r}}function c(n,r){return{x:n.x*r,y:n.y*r,z:n.z*r}}var f,o,p,s,b,h,l,M,q,N,v;return s=z(f=a(e(r,n),y(e(r,n))),e(t,n)),p=function(n,r){return{x:n.y*r.z-n.z*r.y,y:n.z*r.x-n.x*r.z,z:n.x*r.y-n.y*r.x}}(f,o=a(l=e(e(t,n),c(f,s)),y(l))),h=y(e(r,n)),b=z(o,e(t,n)),M=(x(n.r)-x(r.r)+x(h))/(2*h),q=(x(n.r)-x(t.r)+x(s)+x(b))/(2*b)-s/b*M,v=x(n.r)-x(M)-x(q),Math.abs(v)<1e-10&&(v=0),N=Math.sqrt(v),isNaN(N)?null:(l=i(n,i(c(f,M),c(o,q))),p4a=i(l,c(p,N)),p4b=e(l,c(p,N)),0==N||u?l:[p4a,p4b])}
